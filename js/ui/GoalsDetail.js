// SDAPWA v1.0.0 - Goals Detail Screen
const GoalsDetailScreen={goals:[],render(a){this.loadGoals();a.innerHTML='<div class="goals-detail-screen" id="goals-container"></div>';this.renderGoals();window.addEventListener('goals-changed',b=>{this.goals=b.detail;this.renderGoals()})},loadGoals(){if(window.syncManager){this.goals=window.syncManager.getCachedGoals()}},renderGoals(){const a=document.getElementById('goals-container');if(!a)return;if(this.goals.length===0){a.innerHTML='<div class="empty-state"><p class="empty-state-icon">ðŸŽ¯</p><p class="empty-state-title">No Goals Yet</p><p class="empty-state-message">Add your first goal to get started</p><button class="btn-primary" style="margin-top:16px;" onclick="window.App.showToast(\'Goal creation coming soon\',\'info\')">+ Add Goal</button></div>';return}const b=this.goals.map(c=>this.renderGoalCard(c)).join('');a.innerHTML=b+'<button class="add-goal-card" onclick="window.App.showToast(\'Goal creation coming soon\',\'info\')"><div class="add-goal-icon">+</div><div class="add-goal-text">Add New Goal</div></button>'},renderGoalCard(a){const b=window.Algorithms.calculateGoalProgress(a),c=(b.completed/b.total)*100;return'<div class="goal-card"><div class="goal-card-header"><div class="goal-card-label">Goal</div><div class="goal-card-name">'+a.name_one_word+'</div><div class="goal-card-definition">'+a.definition+'</div></div><div class="goal-progress-bar"><div class="goal-progress-fill" style="width:'+c+'%"></div></div><div class="goal-progress-text">'+b.completed+' of '+b.total+' steps complete</div><div class="goal-steps">'+a.steps.map((d,e)=>'<div class="goal-step '+(d.completed?'completed':'')+'"><div class="goal-step-checkbox '+(d.completed?'checked':'')+'" onclick="GoalsDetailScreen.toggleStep(\''+a.id+'\','+e+')"></div><div class="goal-step-content"><div class="goal-step-description">'+d.description+'</div><div class="goal-step-date">Due: '+d.due_date+'</div></div></div>').join('')+'</div></div>'},async toggleStep(a,b){const c=this.goals.find(d=>d.id===a);if(!c)return;c.toggleStepCompletion(b);try{const d=window.Auth.getUserId();await window.db.collection('users/'+d+'/goals').doc(a).update({steps:c.steps.map(e=>e.toObject()),updated_at:c.updated_at});window.App.showToast('Step updated!','success')}catch(a){console.error('Error updating step:',a);window.App.showToast('Failed to update step','error')}}};window.GoalsDetailScreen=GoalsDetailScreen;console.log('âœ“ GoalsDetailScreen loaded');
