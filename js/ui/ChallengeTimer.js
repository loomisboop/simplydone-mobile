// SDAPWA v1.0.0 - Challenge Timer Screen
const ChallengeTimerScreen={selectedDuration:15,isRunning:!1,timeRemaining:0,interval:null,render(a){a.innerHTML='<div class="challenge-screen"><h2>Quick Challenge</h2><div class="challenge-duration-selector"><button class="challenge-duration-btn" data-duration="7" onclick="ChallengeTimerScreen.selectDuration(7)">7<span class="duration-label">minutes</span></button><button class="challenge-duration-btn active" data-duration="15" onclick="ChallengeTimerScreen.selectDuration(15)">15<span class="duration-label">minutes</span></button><button class="challenge-duration-btn" data-duration="35" onclick="ChallengeTimerScreen.selectDuration(35)">35<span class="duration-label">minutes</span></button></div><div class="pie-timer-container" id="timer-display"><div class="pie-timer-display" id="time-value">15:00</div><div class="pie-timer-status" id="timer-status">Ready to start</div></div><div class="control-buttons" id="control-buttons"><button class="btn-secondary" onclick="ChallengeTimerScreen.start()">Start Challenge</button></div></div>'},selectDuration(a){this.selectedDuration=a;this.timeRemaining=a*60;document.querySelectorAll('.challenge-duration-btn').forEach(b=>{b.classList.toggle('active',parseInt(b.dataset.duration)===a)});document.getElementById('time-value').textContent=a+':00';document.getElementById('timer-status').textContent='Ready to start'},start(){if(this.isRunning)return;this.isRunning=!0;this.timeRemaining=this.selectedDuration*60;document.getElementById('control-buttons').innerHTML='<button class="btn-secondary" onclick="ChallengeTimerScreen.complete()">I did it!</button><button class="btn-outline" onclick="ChallengeTimerScreen.cancel()">Cancel</button>';this.interval=setInterval(()=>this.tick(),1e3)},tick(){if(this.timeRemaining<=0){this.complete();return}this.timeRemaining--;const a=Math.floor(this.timeRemaining/60),b=this.timeRemaining%60;document.getElementById('time-value').textContent=a.toString().padStart(2,'0')+':'+b.toString().padStart(2,'0');const c=Math.round(this.timeRemaining/(this.selectedDuration*60)*100);document.getElementById('timer-status').textContent=c+'% remaining'},complete(){this.stop();const a=window.Algorithms.calculateChallengePoints(this.selectedDuration);window.App.showToast('Challenge complete! +'+a+' Doing points','success');window.App.showScreen('dashboard')},cancel(){if(!confirm('Cancel challenge? No points will be awarded.'))return;this.stop();window.App.showScreen('dashboard')},stop(){this.isRunning=!1;if(this.interval){clearInterval(this.interval);this.interval=null}this.timeRemaining=0}};window.ChallengeTimerScreen=ChallengeTimerScreen;console.log('âœ“ ChallengeTimerScreen loaded');
