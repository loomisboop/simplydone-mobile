// SDAPWA v1.0.0 - Task List Screen
const TaskListScreen={tasks:[],currentFilter:'all',render(a){this.loadTasks();a.innerHTML='<div class="tasklist-screen"><div class="tasklist-filters"><button class="filter-tab active" data-filter="all">All</button><button class="filter-tab" data-filter="active">Active</button><button class="filter-tab" data-filter="completed">Complete</button><button class="filter-tab" data-filter="rainy">Rainy</button></div><div class="tasklist-content" id="tasklist-content"></div></div>';this.renderTasks();this.setupEventListeners();window.addEventListener('tasks-changed',e=>{this.tasks=e.detail;this.renderTasks()})},loadTasks(){if(window.syncManager){this.tasks=window.syncManager.getCachedTasks()}},setupEventListeners(){document.querySelectorAll('.filter-tab').forEach(a=>a.addEventListener('click',()=>this.switchFilter(a.dataset.filter)))},switchFilter(a){this.currentFilter=a;document.querySelectorAll('.filter-tab').forEach(b=>b.classList.remove('active'));event.target.classList.add('active');this.renderTasks()},renderTasks(){const a=document.getElementById('tasklist-content');if(!a)return;let b=window.Algorithms.filterTasks(this.tasks,this.currentFilter);b=window.Algorithms.sortTasks(b,'date_desc');if(b.length===0){a.innerHTML='<div class="empty-state"><p>No tasks found</p></div>';return}const c=window.Algorithms.groupTasksByDate(b),d=Object.entries(c).map(([e,f])=>'<div class="tasklist-group"><div class="tasklist-group-header">'+e+'</div>'+f.map(g=>this.renderTaskCard(g)).join('')+'</div>').join('');a.innerHTML=d},renderTaskCard(a){const b=a.completed_at?'completed':'',c=window.CONSTANTS.DURATION_COLORS[a.duration_minutes]||window.CONSTANTS.DURATION_COLORS[0];return'<div class="task-card '+b+'"><div class="task-card-header"><div class="task-card-badge" style="background-color:'+c+'">'+(a.duration_minutes||'∞')+'m</div><div class="task-card-content"><div class="task-card-name">'+a.name+'</div></div></div></div>'}};window.TaskListScreen=TaskListScreen;console.log('✓ TaskListScreen loaded');
